# ğŸ” Exploiting an API Endpoint Using Documentation

Welcome to my guide on solving the **"Exploiting an API endpoint using documentation"** lab from PortSwigger Academy. In this guide, we will explore how to identify, analyze, and exploit API endpoints effectively using available documentation.

---

## ğŸ“‘ Table of Contents

- [Overview](#%F0%9F%93%9D-overview)
- [Background](#%F0%9F%9B%A0-background)
- [Enumeration](#%F0%9F%94%8D-enumeration)
- [Exploitation](#%F0%9F%A7%AA-exploitation)
- [Conclusion](#%F0%9F%93%8C-conclusion)

---

## ğŸ“ Overview

This lab demonstrates how to leverage API documentation to exploit an API endpoint.

**Key Objective:** Exploit an API endpoint to delete the `carlos` user account.

**Difficulty Level (1-10):** â˜…â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†

Letâ€™s dive in and solve this step by step!

---

## ğŸ›  Background

To complete this lab, follow these prerequisites:

1. Log in using the following credentials:

   - Username: `wiener`
   - Password: `peter`

2. Identify API documentation to locate exploitable endpoints.

---

## ğŸ” Enumeration

### 1ï¸âƒ£ Access the Application

Navigate to the homepage and log in using the provided credentials:

```
Username: wiener
Password: peter
```

Once logged in, inspect the functionality to update the userâ€™s email address.

### 2ï¸âƒ£ Capture HTTP Requests

Using Burp Suite, intercept the HTTP request generated when updating the email. This reveals the structure of the API:

```http
PATCH /api/user/wiener HTTP/1.1
Host: your-lab-url
Content-Type: application/json

{
  "email": "newemail@example.com"
}
```

The endpoint `/api/user/<username>` is used for modifying user data. Letâ€™s enumerate further!

### 3ï¸âƒ£ Discover API Documentation

By sending a GET request to `/api`, we can enumerate API documentation. Use Burp Suite Repeater or any HTTP client like cURL:

```http
GET /api HTTP/1.1
Host: your-lab-url
```

This returns a structured API response or links to documentation, detailing available endpoints:

| Method | Endpoint         | Parameters        | Response        |
| ------ | ---------------- | ----------------- | --------------- |
| GET    | /user/[username] | None              | 200 OK, User    |
| DELETE | /user/[username] | None              | 200 OK, Success |
| PATCH  | /user/[username] | {"email": String} | 200 OK, User    |

The `DELETE` method is particularly interesting, as it allows deleting a user without requiring additional permissions.

---

## ğŸ§ª Exploitation

### Step 1ï¸âƒ£: Identify the Target

Our goal is to delete the `carlos` user account. Based on the documentation, we can achieve this by sending a DELETE request to the `/user/carlos` endpoint.

### Step 2ï¸âƒ£: Send the Exploit

Using Burp Suite or any HTTP client, craft the following DELETE request:

```http
DELETE /api/user/carlos HTTP/1.1
Host: your-lab-url
```

### Step 3ï¸âƒ£: Verify Deletion

If successful, the server will respond with `200 OK`, and the `carlos` account will no longer exist.

---

## ğŸ“Œ Conclusion

In this lab, we successfully:

- Identified and analyzed API endpoints using documentation.
- Exploited the `DELETE` method to delete a user account without proper access controls.

### âœ¨ Key Takeaways

1. Always enumerate API endpoints thoroughly.
2. Understand the functionality of HTTP methods (GET, POST, DELETE, PATCH, etc.).
3. Check for insufficient access controls in API implementations.

Thanks for reading! I hope this guide was helpful. Feel free to share your thoughts or improvements. Happy learning! ğŸš€

