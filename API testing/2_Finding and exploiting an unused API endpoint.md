**Version**: 1.0  
**Author**: [Trung Huynh](https://www.linkedin.com/in/trung-huynh-chi-pc01/)  

![Burp Suite](https://img.shields.io/badge/Tool-Burp%20Suite-orange)  
![License](https://img.shields.io/badge/License-MIT-green)  
![Contributions](https://img.shields.io/badge/Contributions-Welcome-orange)  
![API Testing](https://img.shields.io/badge/API%20Testing-Intermediate-blue)  
![PortSwigger](https://img.shields.io/badge/PortSwigger-Labs-red)  

---
# üß™ Finding and Exploiting an Unused API Endpoint

Welcome to this hands-on lab tutorial: **Finding and Exploiting an Unused API Endpoint** from PortSwigger. This guide will teach you how to uncover hidden API functionality and exploit it to achieve your goal. Let‚Äôs dive into the world of API pentesting!

---

## üìñ Table of Contents

- [üîç Lab Description](#lab-description)
- [üîß Required Knowledge](#required-knowledge)
- [üîó Accessing the Lab](#accessing-the-lab)
- [üí° Solution Walkthrough](#solution-walkthrough)
  - [Step 1: Explore the API Endpoint](#step-1-explore-the-api-endpoint)
  - [Step 2: Discover Hidden Functionality](#step-2-discover-hidden-functionality)
  - [Step 3: Authenticate and Modify the Request](#step-3-authenticate-and-modify-the-request)
  - [Step 4: Verify and Purchase](#step-4-verify-and-purchase)
- [üìã Tips and Notes](#tips-and-notes)
- [üìö License](#license)

---

## üîç Lab Description

In this lab, your goal is to exploit a hidden API endpoint to buy a **Lightweight l33t Leather Jacket** for free. You can log in to your own account using the following credentials:

```
wiener:peter
```

![Local Image](img/lab2/h1.png "Local Image")

---

## üîß Required Knowledge

To successfully solve this lab, you‚Äôll need to know:

1. üîπ How to use error messages to construct a valid request.
2. üîπ How HTTP methods are used by RESTful APIs.
3. üîπ How changing the HTTP method can reveal additional functionality.

These concepts are covered in the [API Testing Academy](https://portswigger.net/web-security/api) topic by PortSwigger.

---

## üîó Accessing the Lab

1. Open **Burp Suite** and access the lab in Burp's browser.
2. Log in using the credentials provided: `wiener:peter`.

---

## üí° Solution Walkthrough

### Step 1: Explore the API Endpoint

- Navigate to a product in the lab's web application.
- In **Proxy > HTTP history**, locate the API request for the product (e.g., `/api/products/3/price`).
- Right-click the request and select **Send to Repeater**.

![Local Image](img/lab2/h2.png "Local Image")

### Step 2: Discover Hidden Functionality

- In **Repeater**, change the HTTP method from `GET` to `OPTIONS` and send the request.
- Note the response specifying the allowed methods: `GET` and `PATCH`.

![Local Image](img/lab2/h3.png "Local Image")

### Step 3: Authenticate and Modify the Request

- Log in using the credentials `wiener:peter`.
- Click on the Lightweight "l33t" Leather Jacket product.
- Locate the API request for the jacket (e.g., `/api/products/1/price`) and send it to Repeater.
- Change the HTTP method to `PATCH` and set the `Content-Type` header to `application/json`.
- Add an empty JSON object `{}` as the request body and send the request. Notice the error indicating the need for a `price` parameter.
- Update the request body with `{"price":0}` and resend it.

![Local Image](img/lab2/h4.png "Local Image")

### Step 4: Verify and Purchase

- Refresh the product page in Burp's browser. The jacket price should now display as `$0.00`.
- Add the jacket to your basket and place the order to solve the lab.

![Local Image](img/lab2/h5.png "Local Image")

---

## üìã Tips and Notes

- üîë Always examine error messages carefully; they often provide hints about required parameters or valid request formats.
- üîÑ Use different HTTP methods (e.g., `GET`, `POST`, `PATCH`) to discover undocumented API features.
- üõ†Ô∏è Utilize tools like Burp Suite Repeater to manipulate and analyze requests efficiently.

---

## üìö License

This project is licensed under the [MIT License](LICENSE).

![MIT License](https://img.shields.io/badge/MIT-License-green)

---

Feel free to contribute or raise issues if you have ideas to improve this guide!
